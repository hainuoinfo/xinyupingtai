{subtemplate ../header}
{js_select jquery,formValidator}
<script language="javascript">
$(function(){
	$('#myForm').formValidator({
		regexpName:'RegStr',
		messageName:'Message',
		clearDef:true,
		messageOrder:{
			action:0,
			wrong:2,
			right:1,
			none:3
		},
		style:{
			idName:'id',
			tipSuffix:'_tip',
			action:[{className:'sp_now',idSuffix:'_tip'}],
			right:[{className:'sp_ok',idSuffix:'_tip'}],
			wrong:[{className:'sp_error',idSuffix:'_tip'}],
			none:null,
			set:false,
			defColor:'#bbbbbb',
			txtColor:'#000000'
		}
	});
});
var check_username=function(e){
	var obj=$(e);
	if(!obj.attr('ajaxCheck')){
		if(obj.val() && formValidator.myForm.objectBlur(obj)){
			obj.attr({'disabled':true,'ajaxCheck':true});
			$.ajax({
				url: '{$weburl2}ajax/check.php?action=username',
				data: 'hash2=$sys_hash2&username='+encodeURI($(obj).val()),
				type: "POST",
				cache: false,
				dataType:"text",
				success: function(data){
					obj.attr({'disabled':false,'ajaxCheck':false});
					if(data=='2'){
						obj.attr({'formReturn':'true'});
						formValidator.myForm.setTipInfo(obj.attr('id'),'您可以使用该用户名&nbsp;&nbsp;'+obj.val(),formValidator.myForm.flag.constStatic.setRight);
					} else {
						obj.attr({'formReturn':'false'});
						formValidator.myForm.setTipInfo(obj.attr('id'),'该用户名已存在',formValidator.myForm.flag.constStatic.setWrong);
					}
				}
			});
		}
		
	}
};
var checkParent = function(e){
	var obj=$(e);
	if(!obj.attr('ajaxCheck')){
		if(obj.val() && formValidator.myForm.objectBlur(obj)){
			obj.attr({'disabled':true,'ajaxCheck':true});
			$.ajax({
				url: '{$weburl2}ajax/check.php?action=username',
				data: 'hash2=$sys_hash2&username='+encodeURI($(obj).val()),
				type: "POST",
				cache: false,
				dataType:"text",
				success: function(data){
					obj.attr({'disabled':false,'ajaxCheck':false});
					if(data=='1'){
						obj.attr({'formReturn':'true'});
						formValidator.myForm.setTipInfo(obj.attr('id'),'该推荐人存在',formValidator.myForm.flag.constStatic.setRight);
					} else {
						obj.attr({'formReturn':'false'});
						formValidator.myForm.setTipInfo(obj.attr('id'),'该推荐人不存在',formValidator.myForm.flag.constStatic.setWrong);
					}
				}
			});
		}
		
	}
};
var checkVcode=function(e){
	var obj=$(e);
	if(!obj.attr('ajaxCheck')){
		if(formValidator.myForm.objectBlur(obj)){
			obj.attr({'disabled':true,'ajaxCheck':true});
			$.ajax({
				url: '{$weburl2}ajax/check.php?action=vcode',
				data: 'hash2=$sys_hash2&vcode='+$(obj).val(),
				type: "POST",
				cache: false,
				dataType:"text",
				success: function(data){
					obj.attr({'disabled':false,'ajaxCheck':false});
					if(data=='1'){
						obj.attr({'formReturn':'true'});
						formValidator.myForm.setTipInfo(obj.attr('id'),'正确',formValidator.myForm.flag.constStatic.setRight);
					} else {
						obj.attr({'formReturn':'false'});
						formValidator.myForm.setTipInfo(obj.attr('id'),'验证码不正确',formValidator.myForm.flag.constStatic.setWrong);
					}
				}
			});
		}
		
	}
}
</script>
<div class="main">
  <div class="tip_1">新用户免费注册-轻松注册十秒搞定！　<span><span class="f_orange">０１填写信息</span>　０２提交注册信息　０３手机短信激活帐户　０４完成注册</span></div>
  <div class="tip_2">小贴士：以下所有信息请务必真实填写，在接发任务的时候会涉及到货款的转移、帐户的变更等等问题，如非真实，官方将无法确保你的正当利益受保护，特别是QQ号码，手机号码等信息，在接发任务期间互相联系时必须要用到。真实的个人信息将有助于给您使用的服务带来更多的保障以及便捷。</div>
  {if $indexMessage}<div class='error_panel'><div>$indexMessage</div></div>{/if}
  <form name="myForm" method="post" id="myForm" enctype="multipart/form-data">
$sys_hash_code2
    <div class="bar">会员注册信息</div>
    <table class="tbl" width="100%" border="0" cellspacing="0" cellpadding="8">
      <tr>
        <td width="120" align="right">用户名：</td>
        <td width="170"><input name="username" type="text" id="username" class="text_normal" maxlength="16" RegStr="/^[A-Za-z\u4E00-\u9FA5]{1}[A-Za-z0-9\u4E00-\u9FA5._-]{2,16}$/" value="$datas[username]" Message="请输入您的用户名|正在检查用户名...|用户名格式错误" onblur="check_username(this)" onchange="$(this).attr({'formReturn':'true'});" /></td>
        <td><a href="javascript:;" class="link_o" onclick="checkUsername();" title="点击检查用户名是否可用">检查用户名是否可用</a> 用户名由中文、英文字母(不区分大小写)、数字(0-9)组成，<br />长度在3-16个字符之间(一个中文算两个字符)，并且只能以中文或字母开头。<strong>请勿和您的掌柜名雷同</strong><span id="username_tip"></span></td>
      </tr>
      <tr>
        <td align="right">登录密码：</td>
        <td><input name="password" type="password" class="text_normal" id="password" maxlength="16" RegStr="/^.{6,20}$/" Message="请输入密码|正确|密码格式错误" onkeydown="checkPsw(this,'psw_one')" /></td>
        <td>登录时需要使用密码，可以是6至20位任意字符。
			<div class="psw">
				<strong>密码强度：</strong><ul><li id="psw_one" class="psw_0"></li></ul>
				<br /><span id="password_tip"></span>
			</div></td>
      </tr>
      <tr>
        <td align="right">确认登录密码：</td>
        <td><input name="password_" type="password" class="text_normal" id="password_" preg="syn=确认密码|正确|错误，两次密码输入不一致|password" /></td>
        <td>请再输入一遍您上面输入的登录密码，两次密码要一致哟！<span id="password__tip"></span></td>
      </tr>
      <tr>
        <td align="right" class="f_b_red">操作密码：</td>
        <td><input name="password2" type="password" class="text_normal" id="password2" maxlength="16" RegStr="/^.{6,20}$/" Message="请输入操作吗|正确|密码格式错误" onkeydown="checkPsw(this,'psw_two')" /></td>
        <td>操作密码，6-20位，操作密码不能为空！用户每次登陆后第一次进行提现和发布任务与修改个人资料等重要操作时需要输入操作密码；请不要设置与登录密码相同的密码。
			<div class="psw"><strong>密码强度：</strong><ul><li id="psw_two" class="psw_0"></li></ul>
			<br /><span id="password2_tip"></span>
			</div></td>
      </tr>
      <tr>
        <td align="right" class="f_b_red">确认操作密码：</td>
        <td><input name="password2_" type="password" class="text_normal" id="password2_" preg="syn=确认操作码|正确|错误，两次密码输入不一致|password2" onfocus="$('#two_tip').addClass('f_red')" /></td>
        <td>请再输入一遍您上面输入的操作密码，两次密码要一致哟！<br />
            <span class="f_b" id="two_tip">操作密码主要用于资金、帐户安全等操作，请牢记您填写的操作密码</span>
			<span id="password2__tip"></span>
			</td>
      </tr>
    </table>
    <div class="bar">个人基本资料</div>
    <table class="tbl" width="100%" border="0" cellspacing="0" cellpadding="8">
      <tr>
        <td width="120" align="right">QQ号码：</td>
        <td width="170"><input name="qq" type="text" id="qq" class="text_normal" maxlength="11" value="$datas[qq]" preg="qq=请填写真实，用于交易联系及取回密码使用；注册后不可修改。|正确|格式错误" /></td>
        <td><span id="qq_tip"></span></td>
      </tr>
      <tr>
        <td align="right">真实姓名：</td>
        <td><input name="truename" type="text" id="truename" class="text_normal" maxlength="4" value="$datas[truename]" RegStr="/^[\u4E00-\u9FA5]{2,4}$/" Message="请输入您的姓名2到4个中文，请填写真实，用于保障您平台资金安全，注册后不可修改。|正确|格式错误" /></td>
        <td><span id="truename_tip"></span></td>
      </tr>
      <tr>
        <td align="right">手机号码：</td>
        <td><input name="mobilephone" type="text" id="mobilephone" class="text_normal" maxlength="11" preg="mobilephone=请填写真实，用于短信认证，收取平台操作码等重要操作，注册后不可修改。|正确|格式错误" /></td>
        <--<td><span id="mobilephone_tip"></span></td>-->
      </tr>
      <tr>
        <td align="right">Email地址：</td>
        <td><input name="email" type="text" id="email" class="text_normal" maxlength="64" value="$datas[email]" preg="email=Email邮件地址，仅用于找回密码，不会显示给其他人查看。|正确|格式错误" /></td>
        <td><span id="email_tip"></span></td>
      </tr>
      <tr>
        <td align="right">验证码：</td>
        <td><input name="vcode" type="text" id="vcode" style="width:95px;" maxlength="4" RegStr="/^\w{4}$/" Message="请输入验证码|正在检查...|格式错误" onblur="checkVcode(this)" onchange="$(this).attr({'formReturn':'true'});" />
          <img id="imgCode" src="{$weburl2}images/vcode2.php" alt="" align="absmiddle" /></td>
        <td><a href="javascript:;" class="link_o" onclick="$('#imgCode').attr({src:'{$weburl2}images/vcode2.php?'+Math.random()});return false;">看不清楚？换一个</a><br /><span id="vcode_tip"></span></td>
      </tr>
    </table>
    <div class="bar">选填信息</div>
    <table class="tbl" width="100%" border="0" cellspacing="0" cellpadding="8">
      <tr>
        <td width="120" align="right">性别：</td>
        <td width="170"><input value="1" name="sex" type="radio" id="sexBoy"{if (isset($datas) && $datas[sex]==1) || !isset($datas)} checked="checked"{/if} />
          男　
          <input value="2" name="sex" type="radio" id="sexGirl"{if $datas[sex]==2} checked{/if} />
          女</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td align="right">推荐人用户名：</td>
        <td><input name="parent" type="text" id="parent" class="text_normal" maxlength="16" emptyRunReg="false" RegStr="/^[A-Za-z\u4E00-\u9FA5]{1}[A-Za-z0-9\u4E00-\u9FA5._-]{1,15}$/" value="{if $datas[parent]}$datas[parent]{elseif $pusername}$pusername{/if}" Message="请输入推荐人用户名|正在检查用户名...|用户名格式错误" onblur="checkParent(this)" onchange="$(this).attr({'formReturn':'true'});" /></td>
        <td>没有可留空！对于被推荐人，没有任何损失，推荐人得到积分奖励。<span id="parent_tip"></span></td>
      </tr>
      <tr>
        <td align="right">通讯地址：</td>
        <td colspan="2"><input name="address" type="text" id="address" class="text_long" maxlength="100" value="$datas[address]" />
          请如实填写</td>
      </tr>
    </table>
    <div class="btn_reg">
      <input name="btnSubmit" type="image" id="btnSubmit" src="{$weburl2}images/btn/btn_reg.gif" />
    </div>
  </form>
  <div class="bar_2">联盟服务条款</div>
  <div class="tip_3">
    <div class="textarea_reg"><div style="padding:5px">{pa protocol}</div></div>
  </div>
</div>
<script type="text/javascript">
function checkPsw(e,id) {
	var obj = $(e);
	var setObj = $('#'+id);
	var val=obj.val();
	if (val.length < 6) {
		setObj.text("太 短");
		setObj[0].className = "psw_1";
	} else {
		if ((/^[a-zA-Z0-9]+$/.test(val) || val < 6) && val.length < 10) {		
			setObj.text("普 通");
			setObj[0].className = "psw_2";
		} else {
			setObj.text("安 全");
			setObj[0].className = "psw_3";
		}
	}
}
</script>
{subtemplate ../footer}